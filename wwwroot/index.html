<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Survey Portal (Static Demo)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/wwwroot/css/survey.css" rel="stylesheet">
</head>
<body>
  <div class="container py-4">
    <h3 class="mb-3">Survey Portal – Frontend Only</h3>

    <div class="mb-3">
      <label for="surveySelector" class="form-label">Load sample survey JSON</label>
      <select id="surveySelector" class="form-select" onchange="window.loadSurvey(this.value)">
        <option value="/wwwroot/data/survey.simple.json">Simple</option>
        <option value="/wwwroot/data/survey.advanced.json">Advanced</option>
      </select>
    </div>

    <div id="surveyApp">
      <div v-if="!loaded" class="text-muted">Choose a survey to load…</div>

      <template v-else>
        <div v-for="(page, pi) in pages" :key="page.id" class="page-block mb-4">
          <h5 class="mb-3">{{ page.title }}</h5>
          <div v-for="q in page.questions" :key="q.id" class="mb-3">
            <component :is="componentType(q)"
                       :question="q"
                       :model-value="answersByQuestionId[q.id]"
                       @update:modelValue="updateAnswer(q.id, $event)"></component>
          </div>
        </div>

        <div class="mt-4 d-flex gap-2">
          <button class="btn btn-primary" @click="downloadAnswers">Download Answers (JSON)</button>
          <button class="btn btn-outline-secondary" @click="reset">Reset</button>
        </div>
      </template>
    </div>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

  <script src="/wwwroot/js/components/questionWrapper.js"></script>
  <script src="/wwwroot/js/components/trueFalse.js"></script>
  <script src="/wwwroot/js/components/freeText.js"></script>
  <script src="/wwwroot/js/components/multipleChoice.js"></script>
  <script src="/wwwroot/js/surveyApp.js"></script>
</body>
</html>
